id: '16968517651850.7367747537503266'
name: Load_Risk_Data
nameConfigured: true
steps:
  - id: '16971114215390.8165961790195606'
    type: customAsyncCode
    name: Get_Status
    params:
      - type: asyncCode
        value: |-
          let myReturn = '%'
          if ({{ui.tog_Hide_Closed.value}} == true){
            myReturn = 'Open'
          }  
          return myReturn
        valueType: interpolatedValue
        interpolationType: code
    level: 0
    fallthroughError: false
    isChanged: true
    nameConfigured: true
  - id: '16971131293620.30221924319461824'
    type: customAsyncCode
    name: Get_Rating
    params:
      - type: asyncCode
        value: |
          return {{ui.slct_Rating_Filter.value}}
        valueType: interpolatedValue
        interpolationType: code
    level: 0
    fallthroughError: false
    isChanged: true
    nameConfigured: true
  - id: '16969552536350.8797808458337781'
    type: condition
    name: is_service_any
    params:
      - type: code
        value: |-
          if ({{state.SelectedServiceID == "0"}}){
            return true}
          else {
            return false}
        valueType: interpolatedValue
        interpolationType: code
      - type: steps
        value:
          - condition: true
            steps:
              - id: '16971136489840.1881353262465737'
                type: condition
                name: Filter_Rating
                params:
                  - type: code
                    value: |-
                      if ({{ui.slct_Rating_Filter.value}} == 0){
                        return false}
                      else{
                        return true}
                    valueType: interpolatedValue
                    interpolationType: code
                  - type: steps
                    value:
                      - condition: true
                        steps:
                          - id: '16986759587470.6882704234058723'
                            type: condition
                            name: Is_type_ALL
                            params:
                              - type: code
                                value: >-
                                  {{(ui.slct_Type_Filter.value.length == 1 &&
                                  ui.slct_Type_Filter.value.includes('%'))||
                                  (ui.slct_Type_Filter.value.length == 0) }}
                                valueType: interpolatedValue
                                interpolationType: code
                              - type: steps
                                value:
                                  - condition: true
                                    steps:
                                      - id: '16986759587480.10304126976123329'
                                        type: customSQLQuery
                                        name: Allrisks
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id
                                              ={{state.account.account_id}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type like '%'

                                              AND risk_rating IN
                                              ({{steps.Get_Rating.data}})

                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id =?)

                                              and risk_status like ?

                                              and area like ?

                                              and risk_type like '%'

                                              AND risk_rating IN (?)

                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Rating.data)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 2
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                  - condition: false
                                    steps:
                                      - id: '16986759587480.4077486704062956'
                                        type: customSQLQuery
                                        name: allrisksforType
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id
                                              ={{state.account.account_id}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type IN
                                              ({{ui.slct_Type_Filter.value}})

                                              AND risk_rating IN
                                              ({{steps.Get_Rating.data}})

                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id =?)

                                              and risk_status like ?

                                              and area like ?

                                              and risk_type IN (?)

                                              AND risk_rating IN (?)

                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Type_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Rating.data)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 2
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                valueType: custom
                            level: 2
                            fallthroughError: false
                            isChanged: true
                            nameConfigured: true
                      - condition: false
                        steps:
                          - id: '16986760702730.6702305112988602'
                            type: condition
                            name: IS_type_ALL
                            params:
                              - type: code
                                value: >-
                                  {{(ui.slct_Type_Filter.value.length == 1 &&
                                  ui.slct_Type_Filter.value.includes('%'))||
                                  (ui.slct_Type_Filter.value.length == 0) }}
                                valueType: interpolatedValue
                                interpolationType: code
                              - type: steps
                                value:
                                  - condition: true
                                    steps:
                                      - id: '16986760702730.5883305586797509'
                                        type: customSQLQuery
                                        name: Allrisks2
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id
                                              ={{state.account.account_id}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type like '%'


                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id =?)

                                              and risk_status like ?

                                              and area like ?

                                              and risk_type like '%'


                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 2
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                  - condition: false
                                    steps:
                                      - id: '16986760702730.7913123330136045'
                                        type: customSQLQuery
                                        name: allrisksforType2
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id
                                              ={{state.account.account_id}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type IN
                                              ({{ui.slct_Type_Filter.value}})


                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id =?)

                                              and risk_status like ?

                                              and area like ?

                                              and risk_type IN (?)


                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Type_Filter.value)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 2
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                valueType: custom
                            level: 2
                            fallthroughError: false
                            isChanged: true
                            nameConfigured: true
                    valueType: custom
                level: 1
                fallthroughError: false
                isChanged: true
                nameConfigured: true
          - condition: false
            steps:
              - id: '16971137028860.7180010238065273'
                type: condition
                name: Filter_Rating2
                params:
                  - type: code
                    value: |-
                      if ({{ui.slct_Rating_Filter.value}} == 0){
                        return false}
                      else {
                        return true}
                    valueType: interpolatedValue
                    interpolationType: code
                  - type: steps
                    value:
                      - condition: true
                        steps:
                          - id: '16984140611660.4678621916077985'
                            type: condition
                            name: is_type_ALL
                            params:
                              - type: code
                                value: >-
                                  {{(ui.slct_Type_Filter.value.length == 1 &&
                                  ui.slct_Type_Filter.value.includes('%'))||
                                  (ui.slct_Type_Filter.value.length == 0) }}
                                valueType: interpolatedValue
                                interpolationType: code
                              - type: steps
                                value:
                                  - condition: true
                                    steps:
                                      - id: '16984140722520.266638419331358'
                                        type: customSQLQuery
                                        name: AllForService4
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id
                                              ={{state.account.account_id}})

                                              and (fk_service_id =
                                              {{state.SelectedServiceID}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type like '%'

                                              AND risk_rating IN
                                              ({{steps.Get_Rating.data}})

                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id =?)

                                              and (fk_service_id = ?)

                                              and risk_status like ?

                                              and area like ?

                                              and risk_type like '%'

                                              AND risk_rating IN (?)

                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.SelectedServiceID)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Rating.data)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 2
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                  - condition: false
                                    steps:
                                      - id: '16969553381270.04940770984704601'
                                        type: customSQLQuery
                                        name: AllForService
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id
                                              ={{state.account.account_id}})

                                              and (fk_service_id =
                                              {{state.SelectedServiceID}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type IN
                                              ({{ui.slct_Type_Filter.value}})

                                              AND risk_rating IN
                                              ({{steps.Get_Rating.data}})

                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists  (select 1 from
                                              join_account_services where service_id =
                                              get_risk_data.fk_service_id and
                                              account_id =?)

                                              and (fk_service_id = ?)

                                              and risk_status like ?

                                              and area like ?

                                              and risk_type IN (?)

                                              AND risk_rating IN (?)

                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.SelectedServiceID)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Type_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Rating.data)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 2
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                valueType: custom
                            level: 2
                            fallthroughError: false
                            isChanged: true
                            nameConfigured: true
                      - condition: false
                        steps:
                          - id: '16984139983120.6248470017665779'
                            type: condition
                            name: IS_type_all
                            params:
                              - type: code
                                value: >-
                                  {{(ui.slct_Type_Filter.value.length == 1 &&
                                  ui.slct_Type_Filter.value.includes('%'))||
                                  (ui.slct_Type_Filter.value.length == 0) }}
                                valueType: interpolatedValue
                                interpolationType: code
                              - type: steps
                                value:
                                  - condition: true
                                    steps:
                                      - id: '16984140255680.6723655729767222'
                                        type: customSQLQuery
                                        name: AllForService3
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists (
                                                select
                                                  1
                                                from
                                                  join_account_services
                                                where
                                                  service_id = get_risk_data.fk_service_id
                                                  and account_id = {{state.account.account_id}}
                                              )

                                              and (fk_service_id =
                                              {{state.SelectedServiceID}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type like '%'

                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: |
                                              SELECT * from get_risk_data
                                              WHERE exists (
                                                select
                                                  1
                                                from
                                                  join_account_services
                                                where
                                                  service_id = get_risk_data.fk_service_id
                                                  and account_id = ?
                                              )
                                              and (fk_service_id = ?)
                                              and risk_status like ?
                                              and area like ?
                                              and risk_type like '%'
                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.SelectedServiceID)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 3
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                  - condition: false
                                    steps:
                                      - id: '16971137088290.681886193783352'
                                        type: customSQLQuery
                                        name: AllForService2
                                        params:
                                          - type: query
                                            value: >
                                              SELECT * from get_risk_data

                                              WHERE exists (
                                                select
                                                  1
                                                from
                                                  join_account_services
                                                where
                                                  service_id = get_risk_data.fk_service_id
                                                  and account_id = {{state.account.account_id}}
                                              )

                                              and (fk_service_id =
                                              {{state.SelectedServiceID}})

                                              and risk_status like
                                              {{steps.Get_Status.data}}

                                              and area like
                                              {{ui.slct_Area_Filter.value}}

                                              and risk_type IN
                                              ({{ui.slct_Type_Filter.value}})

                                              order by created_at desc
                                            valueType: interpolatedValue
                                            interpolationType: string
                                          - type: datasourceId
                                            value: Supabase Bridgelink Apps Database
                                            valueType: custom
                                            mustSelectFirst: true
                                          - type: preparedQuery
                                            value: |
                                              SELECT * from get_risk_data
                                              WHERE exists (
                                                select
                                                  1
                                                from
                                                  join_account_services
                                                where
                                                  service_id = get_risk_data.fk_service_id
                                                  and account_id = ?
                                              )
                                              and (fk_service_id = ?)
                                              and risk_status like ?
                                              and area like ?
                                              and risk_type IN (?)
                                              order by created_at desc
                                            valueType: interpolatedValue
                                          - type: preparedQueryParams
                                            value:
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.account.account_id)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(state.SelectedServiceID)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(steps.Get_Status.data)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Area_Filter.value)
                                              - >-
                                                __UI_BAKERY__FORMAT_IF_DATE__(ui.slct_Type_Filter.value)
                                            valueType: custom
                                          - type: customDatabaseName
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: stepVersion
                                            value: 2
                                            valueType: custom
                                          - type: successMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: failureMapper
                                            value: ''
                                            valueType: interpolatedValue
                                          - type: mapperEnabled
                                            value: false
                                            valueType: custom
                                        level: 3
                                        fallthroughError: false
                                        isChanged: true
                                        nameConfigured: true
                                valueType: custom
                            level: 2
                            fallthroughError: false
                            isChanged: true
                            nameConfigured: true
                    valueType: custom
                level: 1
                fallthroughError: false
                isChanged: true
                nameConfigured: true
        valueType: custom
    level: 0
    fallthroughError: false
    isChanged: true
    nameConfigured: true
singleStep: false
mode: manual
modeConfigured: false
parentPageId: '1'
folder: false
config:
  shouldConfirm: false
  confirmMessage: Are you sure you'd like to proceed with "{{actions.Load_Risk_Data.name}}"?
  showSuccessToast: false
  successToast: Action "{{actions.Load_Risk_Data.name}}" successfully executed
  successToastDuration: '3000'
  successToastHideByClick: false
  showErrorToast: true
  errorToast: Action "{{actions.Load_Risk_Data.name}}" has failed
  errorToastDuration: '3000'
  errorToastHideByClick: false
  delay: '600'
  runWhenFirstReferenced: false
  preserveStateOnPageChange: false
assigned: true
selected: true
configured: false
index: 7
